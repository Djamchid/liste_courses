<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liste de Courses</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #764ba2;
            font-size: 3em;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .input-section {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .input-section h3 {
            color: #667eea;
            margin-top: 0;
            font-size: 1.5em;
        }
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #667eea;
            border-radius: 8px;
            resize: vertical;
            font-family: 'Arial', sans-serif;
            box-sizing: border-box;
        }
        .generate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.3em;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
            margin-top: 15px;
        }
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        .generate-btn:active {
            transform: translateY(0);
        }
        .controls {
            text-align: center;
            margin-bottom: 30px;
            display: none;
        }
        .controls.visible {
            display: block;
        }
        .toggle-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.3em;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
        }
        .toggle-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        .toggle-btn:active {
            transform: translateY(0);
        }
        #liste-container {
            display: none;
        }
        #liste-container.visible {
            display: block;
        }
        .rayon {
            margin-bottom: 40px;
            border-left: 6px solid #667eea;
            padding-left: 25px;
            background: #f8f9ff;
            padding: 25px;
            border-radius: 10px;
        }
        .rayon h2 {
            color: #667eea;
            font-size: 2em;
            margin-top: 0;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        .rayon h2::before {
            content: 'üõí';
            margin-right: 15px;
            font-size: 1.2em;
        }
        .rayon ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .rayon li {
            font-size: 1.8em;
            padding: 15px;
            margin: 10px 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            display: flex;
            align-items: center;
        }
        .rayon li:hover {
            transform: translateX(10px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .rayon li input[type="checkbox"] {
            width: 30px;
            height: 30px;
            margin-right: 20px;
            cursor: pointer;
            accent-color: #667eea;
            flex-shrink: 0;
        }
        .rayon li.checked {
            opacity: 0.5;
            text-decoration: line-through;
            transition: all 0.3s ease;
        }
        .rayon li span {
            flex: 1;
        }
        .hide-checked .rayon li.checked {
            display: none;
        }
        .rayon.empty-rayon {
            display: none;
        }
        .exemple {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõí Ma Liste de Courses</h1>
        
        <div class="input-section">
            <h3>üìù Collez votre liste de courses</h3>
            <textarea id="liste-input" placeholder="Entrez vos articles (un par ligne ou s√©par√©s par des virgules)&#10;&#10;Exemple :&#10;Riz complet basmati&#10;C√©leri&#10;≈íufs&#10;Pain&#10;Pommes&#10;Kiwi&#10;Eau&#10;Jus&#10;Bananes&#10;Yaourt"></textarea>
            <div class="exemple">üí° Astuce : Un article par ligne ou s√©par√©s par des virgules</div>
            <button class="generate-btn" onclick="genererListe()">‚ú® G√©n√©rer ma liste</button>
        </div>
        
        <div class="controls" id="controls">
            <button class="toggle-btn" onclick="toggleCheckedItems()">
                <span id="toggle-text">Masquer les articles coch√©s</span>
            </button>
        </div>
        
        <div id="liste-container"></div>
    </div>
    
    <script>
        let hideChecked = false;
        
        // Cat√©gories de produits
        const categories = {
            'Fruits & L√©gumes': {
                emoji: 'ü•¨',
                mots: ['fruit', 'l√©gume', 'pomme', 'banane', 'orange', 'kiwi', 'fraise', 'poire', 'raisin', 'melon', 'past√®que', 'ananas', 'mangue', 'p√™che', 'abricot', 'cerise', 'prune', 'citron', 'lime', 'mandarine', 'cl√©mentine', 'pamplemousse',
                       'tomate', 'salade', 'laitue', 'carotte', 'poireau', 'oignon', 'ail', '√©chalote', 'pomme de terre', 'patate', 'courgette', 'aubergine', 'poivron', 'concombre', 'c√©leri', 'chou', 'brocoli', 'chou-fleur', '√©pinard', 'haricot', 'petit pois', 'ma√Øs', 'champignon', 'avocat', 'artichaut', 'asperge', 'betterave', 'navet', 'radis', 'endive']
            },
            'Produits Laitiers & ≈íufs': {
                emoji: 'ü•õ',
                mots: ['lait', 'yaourt', 'yogurt', 'fromage', 'beurre', 'cr√®me', '≈ìuf', 'oeuf']
            },
            'Viandes & Poissons': {
                emoji: 'ü•©',
                mots: ['viande', 'poulet', 'b≈ìuf', 'porc', 'agneau', 'veau', 'canard', 'dinde', 'jambon', 'saucisse', 'steak', 'c√¥telette', 'r√¥ti', 'bacon', 'lardons',
                       'poisson', 'saumon', 'thon', 'cabillaud', 'morue', 'truite', 'crevette', 'crabe', 'homard', 'moule', 'hu√Ætre', 'calamar', 'seiche']
            },
            '√âpicerie': {
                emoji: 'üõçÔ∏è',
                mots: ['riz', 'p√¢tes', 'pain', 'farine', 'sucre', 'sel', 'poivre', 'huile', 'vinaigre', 'moutarde', 'ketchup', 'mayonnaise', 'sauce', '√©pice', 'conserve', 'bo√Æte', 'c√©r√©ales', 'miel', 'confiture', 'p√¢te', 'biscuit', 'g√¢teau', 'chocolat', 'bonbon', 'chips']
            },
            'Boissons': {
                emoji: 'ü•§',
                mots: ['eau', 'jus', 'soda', 'cola', 'limonade', 'th√©', 'caf√©', 'bi√®re', 'vin', 'champagne', 'alcool', 'sirop', 'smoothie']
            },
            'Hygi√®ne & Entretien': {
                emoji: 'üßº',
                mots: ['savon', 'shampoing', 'dentifrice', 'brosse', 'd√©odorant', 'papier', 'toilette', 'essuie-tout', 'lessive', 'liquide vaisselle', '√©ponge', 'produit', 'nettoyant']
            }
        };
        
        function categoriserProduit(produit) {
            const produitLower = produit.toLowerCase();
            
            for (const [categorie, data] of Object.entries(categories)) {
                if (data.mots.some(mot => produitLower.includes(mot))) {
                    return categorie;
                }
            }
            
            return 'Autres';
        }
        
        function genererListe() {
            const input = document.getElementById('liste-input').value.trim();
            
            if (!input) {
                alert('Veuillez entrer votre liste de courses !');
                return;
            }
            
            // Parser la liste (virgules ou retours √† la ligne)
            const produits = input
                .split(/[,\n]/)
                .map(p => p.trim())
                .filter(p => p.length > 0);
            
            // Organiser par cat√©gorie
            const produitsParCategorie = {};
            
            produits.forEach(produit => {
                const categorie = categoriserProduit(produit);
                if (!produitsParCategorie[categorie]) {
                    produitsParCategorie[categorie] = [];
                }
                produitsParCategorie[categorie].push(produit);
            });
            
            // G√©n√©rer le HTML
            let html = '';
            const ordreCategories = ['Fruits & L√©gumes', 'Viandes & Poissons', 'Produits Laitiers & ≈íufs', '√âpicerie', 'Boissons', 'Hygi√®ne & Entretien', 'Autres'];
            
            ordreCategories.forEach(categorie => {
                if (produitsParCategorie[categorie]) {
                    const emoji = categories[categorie]?.emoji || 'üì¶';
                    html += `
                        <div class="rayon">
                            <h2>${emoji} ${categorie}</h2>
                            <ul>
                    `;
                    
                    produitsParCategorie[categorie].forEach(produit => {
                        html += `<li><input type="checkbox" onclick="toggleItem(this)"><span>${produit}</span></li>`;
                    });
                    
                    html += `
                            </ul>
                        </div>
                    `;
                }
            });
            
            document.getElementById('liste-container').innerHTML = html;
            document.getElementById('liste-container').classList.add('visible');
            document.getElementById('controls').classList.add('visible');
            
            // R√©initialiser le mode masquage
            hideChecked = false;
            document.querySelector('.container').classList.remove('hide-checked');
            document.getElementById('toggle-text').textContent = 'Masquer les articles coch√©s';
        }
        
        function toggleItem(checkbox) {
            const li = checkbox.parentElement;
            if (checkbox.checked) {
                li.classList.add('checked');
            } else {
                li.classList.remove('checked');
            }
            
            if (hideChecked) {
                updateRayonVisibility();
            }
        }
        
        function updateRayonVisibility() {
            const rayons = document.querySelectorAll('.rayon');
            
            rayons.forEach(rayon => {
                const items = rayon.querySelectorAll('li');
                const checkedItems = rayon.querySelectorAll('li.checked');
                
                if (items.length > 0 && items.length === checkedItems.length) {
                    rayon.classList.add('empty-rayon');
                } else {
                    rayon.classList.remove('empty-rayon');
                }
            });
        }
        
        function toggleCheckedItems() {
            const container = document.querySelector('.container');
            const toggleText = document.getElementById('toggle-text');
            
            hideChecked = !hideChecked;
            
            if (hideChecked) {
                container.classList.add('hide-checked');
                toggleText.textContent = 'Afficher les articles coch√©s';
                updateRayonVisibility();
            } else {
                container.classList.remove('hide-checked');
                toggleText.textContent = 'Masquer les articles coch√©s';
                const rayons = document.querySelectorAll('.rayon');
                rayons.forEach(rayon => rayon.classList.remove('empty-rayon'));
            }
        }
    </script>
</body>
</html>
